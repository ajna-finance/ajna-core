// SPDX-License-Identifier: UNLICENSED

pragma solidity 0.8.14;

import { LiquidationERC20PoolInvariants } from "../../invariants/ERC20Pool/LiquidationERC20PoolInvariants.t.sol";

contract RegressionTestLiquidationERC20Pool is LiquidationERC20PoolInvariants { 

    function setUp() public override {
        // failures reproduced with 3 active buckets
        vm.setEnv("NO_OF_BUCKETS", "3");
        super.setUp();
    }

    function test_regression_quote_token() external {
        _liquidationERC20PoolHandler.addQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639932, 3, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        invariant_quoteTokenBalance_QT1();
    }

    function test_regression_arithmetic_overflow() external {
        _liquidationERC20PoolHandler.kickAuction(128942392769655840156268259377571235707684499808935108685525899532745, 9654010200996517229486923829624352823010316518405842367464881, 135622574118732106350824249104903, 0);
        _liquidationERC20PoolHandler.addQuoteToken(3487, 871, 1654, 0);

        invariant_quoteTokenBalance_QT1();
    }

    function test_regression_bucket_take_lps() external {
        _liquidationERC20PoolHandler.removeQuoteToken(7033457611004217223271238592369692530886316746601644, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.addQuoteToken(1, 20033186019073, 1, 0);
        _liquidationERC20PoolHandler.bucketTake(0, 0, false, 2876997751, 0);

        invariant_Lps_B1();
    }

    function test_regression_interest_rate() external {
        _liquidationERC20PoolHandler.bucketTake(18065045387666484532028539614323078235438354477798625297386607289, 14629545458306, true, 1738460279262663206365845078188769, 0);

        invariant_interest_rate_I1();
    }

    function test_regression_incorrect_no_of_borrowers() external {
        _liquidationERC20PoolHandler.moveQuoteToken(18178450611611937161732340858718395124120481640398450530303803, 0, 93537843531612826457318744802930982491, 15596313608676556633725998020226886686244513, 0);
        _liquidationERC20PoolHandler.addCollateral(2208149704044082902772911545020934265, 340235628931125711729099234105522626267587665393753030264689924088, 2997844437211835697043096396926932785920355866486893005710984415271, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(56944009718062971164908977784993293, 737882204379007468599822110965749781465, 1488100463155679769353095066686506252, 11960033727528802202227468733333727294, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(47205392335275917691737183012282140599753693978176314740917, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 164043848691337333691028718232, 0);
        _liquidationERC20PoolHandler.kickAuction(184206711567329609153924955630229148705869686378631519380021040314, 78351, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);
        _liquidationERC20PoolHandler.kickAuction(3, 199726916764352560035199423206927461876998880387108455962754538835220966553, 3, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(999999991828440064944955196599190431639924811, 2781559202773230142346489450532860130, 3000000005240421579956496007310960085855569344, 0);
        _liquidationERC20PoolHandler.pullCollateral(48768502867710912107594904694036421700, 275047566877984818806178837359260100, 0);
        _liquidationERC20PoolHandler.bucketTake(2, 115792089237316195423570985008687907853269984665640564039457584007913129639934, false, 8154570107391684241724530527782571978369827827856399749867491880, 0);
        _liquidationERC20PoolHandler.removeCollateral(43733538637150108518954934566131291302796656384802361118757432084573, 1, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.addQuoteToken(1, 2, 2, 0);
        _liquidationERC20PoolHandler.repayDebt(647805461526201272, 0, 0);
        _liquidationERC20PoolHandler.kickAuction(1019259585194528028904148545812353964867041444572537077023497678982801, 58796345025472936970320, 131319002678489819637546489086162345032717166507611595521, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(2, 2, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(6164937621056362865643346803975636714, 4, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 315548939052682258, 0);
        _liquidationERC20PoolHandler.repayDebt(2987067394366841692658, 170206016570563384086766968869520628, 0);
        _liquidationERC20PoolHandler.pledgeCollateral(3558446182295495994762049031, 0, 0);
        _liquidationERC20PoolHandler.drawDebt(4525700839008283200312069904720925039, 3000000000753374912785563581177665475703155339, 0);
        _liquidationERC20PoolHandler.kickAuction(1, 3559779948348618822016735773117619950447774, 218801416747720, 0);
        _liquidationERC20PoolHandler.addQuoteToken(1469716416900282992357252011629715552, 13037214114647887147246343731476169800, 984665637618013480616943810604306792, 0);
        _liquidationERC20PoolHandler.pullCollateral(438961419917818200942534689247815826455600131, 64633474453314038763068322072915580384442279897841981, 0);

        invariant_auctions_A3_A4();
    }

    // test was failing due to deposit time update even if kicker lp reward is 0.
    // resolved with PR: https://github.com/ajna-finance/contracts/pull/674
    function test_regression_bucket_deposit_time() external {
        _liquidationERC20PoolHandler.kickAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 2079356830967144967054363629631641573895835179323954988585146991431, 233005625580787863707944, 0);
        _liquidationERC20PoolHandler.bucketTake(21616, 1047473235778002354, false, 1062098588952039043823357, 0);
        _liquidationERC20PoolHandler.bucketTake(1673497622984405133414814181152, 94526073941076989987362055170246, false, 1462, 0);

        invariant_Bucket_deposit_time_B5_B6_B7();
    }

    function test_regression_transfer_taker_lps_bucket_deposit_time() external {
        _liquidationERC20PoolHandler.settleAuction(3637866246331061119113494215, 0, 6163485280468362485998190762304829820899757798629605592174295845105660515, 0);
        _liquidationERC20PoolHandler.transferLps(1610, 1000000000018496758270674070884, 168395863093969200027183125335, 2799494920515362640996160058, 0);
        _liquidationERC20PoolHandler.bucketTake(0, 10619296457595008969473693936299982020664977642271808785891719078511288, true, 1681500683437506364426133778273769573223975355182845498494263153646356302, 0);

        invariant_Bucket_deposit_time_B5_B6_B7();
    }

    function test_regression_invariant_fenwick_depositAtIndex_F1() external {
        _liquidationERC20PoolHandler.moveQuoteToken(4058, 2725046678043704335543997294802562, 16226066, 4284, 0);

        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_depositKick() external {
        _liquidationERC20PoolHandler.repayDebt(13418, 1160, 0);
        _liquidationERC20PoolHandler.kickWithDeposit(143703836638834364678, 470133688850921941603, 0);

        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_invariant_incorrect_take_2() external {
        _liquidationERC20PoolHandler.kickAuction(13452, 7198, 11328, 0);
        _liquidationERC20PoolHandler.takeAuction(6772, 18720, 6668, 0);
        _liquidationERC20PoolHandler.takeAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 1666258487708695528254610529989951, 490873240291829575083322665078478117042861655783753, 0);

        invariant_auction_taken_A6();
    }

    function test_regression_invariant_exchange_rate_bucket_take_1() external {
        _liquidationERC20PoolHandler.bucketTake(183325863789657771277097526117552930424549597961930161, 34356261125910963886574176318851973698031483479551872234291832833800, true, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.settleAuction(52219427432114632, 2227306986719506048214107429, 154672727048162052261854237547755782166311596848556350861587480089015671, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(1999999999999999943017433781133248199223345020, 9070, 3519433319314336634208412746825, 0);
        _liquidationERC20PoolHandler.bucketTake(1, 115792089237316195423570985008687907853269984665640564039457584007913129639932, true, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        invariant_exchangeRate_R1_R2_R3_R4_R5_R6_R7_R8();
    }

    function test_regression_invariant_exchange_rate_bucket_take_2() external {
        _liquidationERC20PoolHandler.moveQuoteToken(1676213736466301051643762607860, 1344, 2018879446031241805536743752775, 4101, 0);
        _liquidationERC20PoolHandler.settleAuction(186120755740, 2, 59199623628501455128, 0);
        _liquidationERC20PoolHandler.kickAuction(115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 29888344, 0);
        _liquidationERC20PoolHandler.bucketTake(2, 259574184, true, 248534890472324170412180243783490514876275, 0);

        invariant_exchangeRate_R1_R2_R3_R4_R5_R6_R7_R8();
    }

    function test_regression_quote_token_2() external {
        _liquidationERC20PoolHandler.kickAuction(2, 3, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);
        _liquidationERC20PoolHandler.kickAuction(416882035302092397436677640325827, 7379, 253058086367250264569525665396366, 0);
        _liquidationERC20PoolHandler.kickAuction(95740057146806695735694068330212313517380414204596464841344800376300745, 15462030827034, 17811087070659573835739283446817, 0);
        _liquidationERC20PoolHandler.drawDebt(91685640224888183606335500279, 3284161781338443742266950748717011, 0);
        _liquidationERC20PoolHandler.settleAuction(366366807138151363686, 2, 39227118695514892784493088788799944161631371060, 0);

        invariant_quoteTokenBalance_QT1();
    }
    function test_regression_invariant_settle_F1_1() external {
        _liquidationERC20PoolHandler.moveQuoteToken(950842133422927133350903963095785051820046356616, 12698007000117331615195178867, 28462469898, 3434419004419233872687259780980, 0);
        _liquidationERC20PoolHandler.kickAuction(5135, 1752, 6350, 0);
        _liquidationERC20PoolHandler.kickAuction(142699, 4496, 4356, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(1173, 1445, 792325212, 447, 0);
        _liquidationERC20PoolHandler.settleAuction(18308, 3145, 947, 0);

        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_invariant_settle_F1_2() external {
        _liquidationERC20PoolHandler.kickAuction(2, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.takeAuction(166780275301665520376512760721506, 1999999999999999999999999999999999999999997110, 2558901617183837697153566056202031, 0);
        _liquidationERC20PoolHandler.settleAuction(33663580470110889117800273608260215520117498607286850968631643620668, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 376647916322842326327814305437229315203341777076993910570400198695301486, 0);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639934, 25553353095446, 4576944944764318279058650381557372220045541635899392217977105401448189236370, 0);
        _liquidationERC20PoolHandler.settleAuction(1124188319925967896480196098633929774470471695473649161072280, 2, 1, 0);

        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_invariant_settle_F1_3() external {
        _liquidationERC20PoolHandler.kickAuction(0, 3945558181153878030177, 4183257860938847260218679701589682740098170267658022767240, 0);
        _liquidationERC20PoolHandler.drawDebt(4462122177274869820804814924250, 18446744073709551705, 0);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 0, 80620507131699866090869932155783811264689, 0);

        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_invariant_settle_F2_1() external {
        _liquidationERC20PoolHandler.kickAuction(2, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.takeAuction(166780275301665520376512760721506, 1999999999999999999999999999999999999999997110, 2558901617183837697153566056202031, 0);
        _liquidationERC20PoolHandler.settleAuction(33663580470110889117800273608260215520117498607286850968631643620668, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 376647916322842326327814305437229315203341777076993910570400198695301486, 0);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639934, 25553353095446, 4576944944764318279058650381557372220045541635899392217977105401448189236370, 0);
        _liquidationERC20PoolHandler.settleAuction(1124188319925967896480196098633929774470471695473649161072280, 2, 1, 0);

        invariant_fenwick_depositsTillIndex_F2();
    }

    function test_regression_invariant_settle_F2_2() external {
        _liquidationERC20PoolHandler.kickAuction(0, 3945558181153878030177, 4183257860938847260218679701589682740098170267658022767240, 0);
        _liquidationERC20PoolHandler.drawDebt(4462122177274869820804814924250, 18446744073709551705, 0);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 0, 80620507131699866090869932155783811264689, 0);

        invariant_fenwick_depositsTillIndex_F2();
    }

    function test_regression_invariant_settle_F1_4() external {
        _liquidationERC20PoolHandler.transferLps(1746372434893174899659975954487250106508989011, 2872040610940802546486007303, 3744, 12183, 0);
        _liquidationERC20PoolHandler.takeAuction(1901516289100290457836604652380130002299311381, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 5028305687421043987719245987, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(20368511603587868045081284330731, 489921429793913961108335952, 2190, 0);
        _liquidationERC20PoolHandler.settleAuction(9999999993177259514653978780, 2827825980613220278546740955, 31863690252499070408500382, 0);
        _liquidationERC20PoolHandler.pledgeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639935, 19234747283271867319, 0);
        _liquidationERC20PoolHandler.kickAuction(309236557489990485667503759172591, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_invariant_settle_F2_3() external {
        _liquidationERC20PoolHandler.transferLps(1746372434893174899659975954487250106508989011, 2872040610940802546486007303, 3744, 12183, 0);
        _liquidationERC20PoolHandler.takeAuction(1901516289100290457836604652380130002299311381, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 5028305687421043987719245987, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(20368511603587868045081284330731, 489921429793913961108335952, 2190, 0);
        _liquidationERC20PoolHandler.settleAuction(9999999993177259514653978780, 2827825980613220278546740955, 31863690252499070408500382, 0);
        _liquidationERC20PoolHandler.pledgeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639935, 19234747283271867319, 0);
        _liquidationERC20PoolHandler.kickAuction(309236557489990485667503759172591, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        invariant_fenwick_depositsTillIndex_F2();
    }

    function test_regression_invariant_F3_1() external {
        _liquidationERC20PoolHandler.bucketTake(2935665707632064617811462067363503938617565993411989637, 3, false, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(13019605457845697172279618365097597238993925, 1, 3994854914, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639935, 3731592205777443374190, 2, 0);
        _liquidationERC20PoolHandler.takeAuction(3554599780774102176805971372130467746, 140835031537485528703906318530162192, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);
        _liquidationERC20PoolHandler.repayDebt(2692074105646752292572533908391, 1968526964305399089154844418825, 0);
        _liquidationERC20PoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639935, 4553829, 0);
        _liquidationERC20PoolHandler.bucketTake(3, 115792089237316195423570985008687907853269984665640564039457584007913129639934, true, 0, 0);
        _liquidationERC20PoolHandler.drawDebt(626971501456142588551128155365, 816763288150043968438676, 0);
        _liquidationERC20PoolHandler.pullCollateral(381299861468989210101433912, 999999999999997998400442008957368645662570165, 0);

        invariant_fenwick_bucket_index_F3();
    }

    function test_regression_invariant_F3_2() external {
        _liquidationERC20PoolHandler.moveQuoteToken(15218560385591477289472131001881316985183680418957988997639810360709, 3836, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.kickAuction(1999999999999999999998790777810985454371631707, 730, 1154341805189495974830690344, 0);
        _liquidationERC20PoolHandler.repayDebt(1000015272050180687, 58527020436006764365179004256, 0);
        _liquidationERC20PoolHandler.transferLps(5732870987391656458983245, 12598011738672933544107229257061, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 144447650651692188788340246700695325628363284377395442919761780917, 0);
        _liquidationERC20PoolHandler.bucketTake(115792089237316195423570985008687907853269984665640564039457584007913129639933, 3019024412741293564051936001315350655350, true, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);

        invariant_fenwick_bucket_index_F3();
    }

    function test_regression_invariant_F4_1() external {
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639935, 127546297848367334892478587751, 723921922395815633171615243621131242188407029895233162931857565302, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(2, 2, 7361820555, 0);
        _liquidationERC20PoolHandler.takeAuction(85885591922376805486065427318859822458293427950603, 8526258315228761831408142393759013524255378290706574861831877477, 1267004887455971938409309909682740381503049590444968840223, 0);
        _liquidationERC20PoolHandler.drawDebt(663777721413606329209923101072, 946300054291644291801213511570, 0);
        _liquidationERC20PoolHandler.kickAuction(2, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 2, 0);
        _liquidationERC20PoolHandler.addQuoteToken(9360900796482582322800, 694431436637841996793959397509, 553923154643858021986449189292, 0);
        _liquidationERC20PoolHandler.settleAuction(3, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 34469655866078951331675076928366708920312931751567797, 0);
        _liquidationERC20PoolHandler.bucketTake(0, 1, false, 3, 0);
        _liquidationERC20PoolHandler.bucketTake(1190209291225920034207711400729307351194726, 2492241351445208059551299524117408972943752042954, false, 3385052658235853990473420226123930971, 0);
        _liquidationERC20PoolHandler.settleAuction(2693191148227658159823862814074, 44032195641927234172430384447, 2992758194960713897487381207167, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(3, 34308174710409047450205135565, 2, 0);
        _liquidationERC20PoolHandler.takeAuction(235062105582030911119033338, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);

        invariant_fenwick_prefixSumIndex_F4();
    }

    function test_regression_invariant_F4_2() external {
        _liquidationERC20PoolHandler.moveQuoteToken(15218560385591477289472131001881316985183680418957988997639810360709, 3836, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.kickAuction(1999999999999999999998790777810985454371631707, 730, 1154341805189495974830690344, 0);
        _liquidationERC20PoolHandler.repayDebt(1000015272050180687, 58527020436006764365179004256, 0);
        _liquidationERC20PoolHandler.transferLps(5732870987391656458983245, 12598011738672933544107229257061, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 144447650651692188788340246700695325628363284377395442919761780917, 0);
        _liquidationERC20PoolHandler.bucketTake(115792089237316195423570985008687907853269984665640564039457584007913129639933, 3019024412741293564051936001315350655350, true, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);

        invariant_fenwick_prefixSumIndex_F4();
    }

    function test_regression_invariant_F4_3() external {
        _liquidationERC20PoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639934, 88, 0);
        _liquidationERC20PoolHandler.kickWithDeposit(454046303796091226235, 1, 0);
        _liquidationERC20PoolHandler.addQuoteToken(22366532024867500041595597535594488494092956872779970834638, 2056702511, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.takeAuction(7409458575819003489055485098, 19999999999999999999998047232, 160427188541373972791114, 0);
        _liquidationERC20PoolHandler.drawDebt(54, 1078707919809097500728008, 0);
        _liquidationERC20PoolHandler.takeAuction(2, 11014481, 0, 0);
        _liquidationERC20PoolHandler.kickWithDeposit(6261145081390052923416, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);
        _liquidationERC20PoolHandler.repayDebt(2, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);
        _liquidationERC20PoolHandler.repayDebt(19522111312004366551699434321235702562902449, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(2, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.kickAuction(1, 2109173590696846176713716365608775182694735853511202473079, 1, 0);
        _liquidationERC20PoolHandler.kickAuction(2, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        invariant_fenwick_prefixSumIndex_F4();
    }

    function test_regression_invariant_F4_4() external {
        _liquidationERC20PoolHandler.kickAuction(2, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        invariant_fenwick_prefixSumIndex_F4();
    }

    function test_regression_invariant_bucketlps_B2_B3() external {

        _liquidationERC20PoolHandler.takeAuction(267050932349, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 3887647445238399127687813856507958874, 0);
        _liquidationERC20PoolHandler.takeAuction(115792089237316195423570985008687907853269984665640564039457584007913129639934, 103646259621272362812910538669334394369354710213939195837836110291707517186914, 22729901925249217583, 0);
        _liquidationERC20PoolHandler.takeAuction(100662313874952447676789537887446294, 36755077739534085766246321257993, 20000000001077187985112900413, 0);
        _liquidationERC20PoolHandler.settleAuction(999999999999999970610520171679024221920138860, 4339, 19021013243589608614756959415948670046791, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(7393406237507791712904627, 1097992169037390343, 30, 0);

        invariant_Buckets_B2_B3();
    }

    /* 
        Test was reverting when kicker is penalized when auction price > neutral price.
        Fixed by making changes in increaseInReserve calculation in case of kicker penalty in 'bucketTake' handler
    */
    function test_regression_evm_revert_1() external {
        _liquidationERC20PoolHandler.settleAuction(91509897037395202876797812344977844707030753189520454312427981040645023300162, 2439649222, 11529, 0);
        _liquidationERC20PoolHandler.bucketTake(6611, 46752666614331262781920, false, 2023645493297626462000000, 0);
    }

    // Test reverting with overflow error in dwatp calculation in _meaningfulDeposit in updateInterestState
    function test_regression_evm_revert_2() external {
        _liquidationERC20PoolHandler.drawDebt(13141077791835967310451371165744721774, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.kickAuction(3, 53758605435723729358784, 3, 0);
        _liquidationERC20PoolHandler.repayDebt(668608315443216098571064749198163965820, 18932325376258851353179065817321260901, 0);
        _liquidationERC20PoolHandler.pullCollateral(1660943750216, 7613674427701330576720241, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(1900819281467749758886813834006, 976636367449728350520609392573, 4111426995539375716119348324981, 0);
        _liquidationERC20PoolHandler.bucketTake(1125834907286324, 3, false, 1, 0);
        _liquidationERC20PoolHandler.repayDebt(275298270790660321974310940, 2799, 0);
        _liquidationERC20PoolHandler.pullCollateral(0, 9824, 0);
        _liquidationERC20PoolHandler.takeAuction(8838, 14328, 1104, 0);
        _liquidationERC20PoolHandler.pullCollateral(96246301775147975236686390, 1999999999999999999999999999999999999999999994, 0);
        _liquidationERC20PoolHandler.drawDebt(1799754463155649601, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.addCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.kickAuction(226, 13555, 999999999999999999929986989979848322131950166, 0);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 326707485783, 5838136568597409883953276821351359808349885898573251821, 0);
        _liquidationERC20PoolHandler.bucketTake(3690337820519065642096193886544, 3089359908022049919104337883638, false, 2000000000000000000000000000000000000000744145, 0);
        _liquidationERC20PoolHandler.withdrawBonds(117305399704678010034227969424174482909936628260540487, 3984313975337, 0);
        _liquidationERC20PoolHandler.takeAuction(115792089237316195423570985008687907853269984665640564039457584007913129639934, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 26153396219420651226355270050749728507266848485707520383, 0);
        _liquidationERC20PoolHandler.removeCollateral(1999999999999997567145382180442515092966583434, 2757, 245342563594047897888988147512, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(298628345, 6995466652341859760028193450571035, 212241589093381072912741572164, 1961348773154021480632696081492, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(302104028381701071862379310831040316417001692505762, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 60362684677889414469182462544723956045205775540295406540387737, 2, 0);
        _liquidationERC20PoolHandler.bucketTake(2, 75288272353, true, 1, 0);
        _liquidationERC20PoolHandler.addCollateral(5005, 147331, 401909674630078222417654, 0);
        _liquidationERC20PoolHandler.transferLps(1029198447942867385425606035931054127523339423727036067, 1, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 0, 0);
        _liquidationERC20PoolHandler.kickWithDeposit(293745346792645466008958291, 16403, 0);
        _liquidationERC20PoolHandler.withdrawBonds(2, 2, 0);
        _liquidationERC20PoolHandler.moveQuoteToken(32224, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 6849415706965240690489344969517578351041775953402620986, 2148695314889429664161453614417855608352221, 0);
        _liquidationERC20PoolHandler.takeAuction(94448273410401913677340426062, 725811011514389123331573619988789182755239580450547667740684, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);
        _liquidationERC20PoolHandler.kickAuction(741587127707329942048624377800, 636948139808655918956339428997, 1638145676855893651071922500909, 0);
        _liquidationERC20PoolHandler.removeCollateral(1, 5658503566441554287849, 301974090866276112427896384335355, 0);
        
        /* Logs for t0Debt2ToCollateral, dwatp calculation in `drawDebt(AmountToBorrow: 0 ,collateralPledged: 1)`
            Time skipped after previous t0Debt2ToCollateral update = 2 hours
            colPreAction_                                          = 0
            colPostAction_                                         = 1
            debtPreAction_                                         = 855551635718176874927403250766
            debtPostAction_                                        = 855551635718176874927403250766
            debt2ColAccumPreAction                                 = 0
            debt2ColAccumPostAction                                = 731968601380048024642438738674823616825204760499344279586756
            t0Debt2ToCollateral Before _updateT0Debt2ToCollateral  = 2387420128063989411532277676228153
            t0Debt2ToCollateral After _updateT0Debt2ToCollateral   = 731968601380048024642438741062243744889194172031621955814909
            inflator_                                              = 1140475256675307106
            t0Debt2ToCollateral_                                   = 731968601380048024642438741062243744889194172031621955814909
            t0Debt_                                                = 1783948099616302823918411453377
        */
        _liquidationERC20PoolHandler.pledgeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639934, 1, 0);
    }

    /*
        F1 and F2 invariants were failing in `settleAuction` handler with difference between pool deposit and fenwick deposits of <1e17 but >1e16 for deposits of order 1e25
        Fixed by changing epsilon in F1, F2 from 1e16 to 1e17.
    */
    function test_regression_invariant_settle_F1_5() external {
        _liquidationERC20PoolHandler.settleAuction(0, 28071594006178250681754737955033434168, 2, 0);
        _liquidationERC20PoolHandler.bucketTake(1730972569841431578573774649270, 10903, false, 1175990817123654468079021581951, 0);
        _liquidationERC20PoolHandler.addQuoteToken(18695, 12463, 370340205846027014555877964321, 0);
        _liquidationERC20PoolHandler.takeAuction(631894654554387507015513816632, 16008, 1016878400672168648586524, 0);
        _liquidationERC20PoolHandler.settleAuction(0, 10186616154253336796368, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 0);

        /* Logs for settleAuction
            Pool deposit at 2572 after accrue interest                 -> 2032689444945695599645197
            local Fenwick deposit at 2572 after accrue interest        -> 2032689444928384299157690

            maxSettleable borrower debt                                -> 1004975124378109460799907

            Pool deposit at 2572 after settlePooldebt                  -> 1027714305720790052619170
            Required Pool deposit after subtracting maxSettleable      -> 1027714320567586138845290
            Precision error in unscaled remove                         -> 14846796086226120

            local Fenwick deposit at 2572 after settlePooldebt         -> 1027714320550274838357783
            Required local fenwick after subtracting maxSettleable     -> 1027714320550274838357783

            Final Difference between pool deposit and local fenwick    -> 14829484785738613
        */
        invariant_fenwick_depositAtIndex_F1();
        invariant_fenwick_depositsTillIndex_F2();
    }

    // Test failing due to exchange rate being calculated as 0
    function test_regression_evm_revert_200_depth_1() external {
        _liquidationERC20PoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639933, 32922171886372397025461758359678058354586052144795367851416216, 29149708811938844258185677588876);
        _liquidationERC20PoolHandler.kickAuction(115792089237316195423570985008687907853269984665640564039457584007913129639935, 2, 1, 44112020970813247225385343986164375242000169293533273283527281409028027731783);
        _liquidationERC20PoolHandler.withdrawBonds(7926394667022825213918856805, 8353, 760724779507062772828300779648512696815905834011116868437034368211773017);
        _liquidationERC20PoolHandler.drawDebt(1650395907908375370646803, 1139089764268016448008730470211, 13082959110942300185021122222306626);
        _liquidationERC20PoolHandler.moveQuoteToken(93610, 142089797548946945081634619871556783127580529081355187339115302, 149, 13913579372905540408633068050774982611379962730, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _liquidationERC20PoolHandler.transferLps(6292165613120549248648866955393, 1060631736309413465, 3996, 5500900090246881585205428293671181, 91068871115322271162237280834);
        _liquidationERC20PoolHandler.kickWithDeposit(115792089237316195423570985008687907853269984665640564039457584007913129639934, 3, 21453159328299531749810384996740705004989165577317322746872305568189);
        _liquidationERC20PoolHandler.drawDebt(10636347319675315313277232412888, 3051548607055529278657663362826, 5726786973904835518002557614676);
        _liquidationERC20PoolHandler.moveQuoteToken(1253192623581620772476304176589, 1004709840617137359, 1363507508709197960, 1733464339886107498992567200861, 7507);
        _liquidationERC20PoolHandler.withdrawBonds(1999999999999997715165989367948945659933163524, 1668463998534567849013477923041, 6990477785303516774672173634812);
        _liquidationERC20PoolHandler.repayDebt(370156721356394741, 172889287526810870997726036, 2919142786755286172671287957331);
        _liquidationERC20PoolHandler.addCollateral(291871857294519226882387742423649871023745205180404, 7032, 3, 3);
        _liquidationERC20PoolHandler.removeQuoteToken(19086136615689377380071157332, 1000016340952587544, 1269638071204883587, 1322590872902949122765936390014);
        _liquidationERC20PoolHandler.takeAuction(0, 105262958558340390379651824224551976850657241393189852, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 1442109703618841621001866737093982407755182032393384);
        _liquidationERC20PoolHandler.pullCollateral(60686734430098688980363534701, 6645, 244505533695904154540052960522);
        _liquidationERC20PoolHandler.takeAuction(4885706793554589184578584463228746134028180231574229781748506559634, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 17050067398218, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _liquidationERC20PoolHandler.withdrawBonds(144829687990416439852964636231, 1205912031800815111535, 0);
        _liquidationERC20PoolHandler.removeQuoteToken(6642410103013296011493426900343, 2492426819368674523, 3266897935879438277566082088672, 9726148562415536773559536515825);
        _liquidationERC20PoolHandler.removeCollateral(1963099933, 11654617284621063852973339264120, 3625603614157547310899003896756902, 1121433320471955127);
        _liquidationERC20PoolHandler.removeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639934, 504174, 0, 2);
        _liquidationERC20PoolHandler.settleAuction(998590020496406658903618279132591123787, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _liquidationERC20PoolHandler.moveQuoteToken(2, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 7284471812509773537205732476838343788700345614979848008809137811380867, 1, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        /**
            bucket.collateral 7032
            bucket.lps 490878978529.677715644529836886
            bucketDeposit 0
            bucketPrice 2711.489231884282943350
            in quoteTokensToLP rate is calculated as 0
         */
        _liquidationERC20PoolHandler.removeQuoteToken(6639226178282709423409930834969, 2197, 7172732911536352257734091713604, 1332571387535482575409273685828232);

        invariant_total_interest_earned_I2();
    }
}

contract RegressionTestLiquidationWith10BucketsERC20Pool is LiquidationERC20PoolInvariants { 

    function setUp() public override { 
        // failures reproduced with 10 active buckets
        vm.setEnv("NO_OF_BUCKETS", "10");
        super.setUp();
    }

    function test_regression_10_buckets_F1() external {
        // this test fails with 3 buckets too vm.setEnv("NO_OF_BUCKETS", "3");
        _liquidationERC20PoolHandler.pledgeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639932, 65525791371595636809558302725027004212560730894876157947151992784342410231, 103035040473513794369019732875418557010747013);
        _liquidationERC20PoolHandler.kickAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 64, 367269856889591020298336523872503988828714573454924899483526860078537745390, 94430471992509925548792343731347746665083413814030298);
        _liquidationERC20PoolHandler.kickAuction(322346561941981177970875605143150570732112804475479262436115390060732, 2000000000000000038613469212920985844263012018, 1000001032936446547, 4781139643513481926814154994051);
        _liquidationERC20PoolHandler.pledgeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639932, 170942531414682848387889063037473312231445901, 0);
        _liquidationERC20PoolHandler.removeCollateral(0, 5965841388, 3, 94987944914677178032647290005498908113148595966903296);
        _liquidationERC20PoolHandler.bucketTake(83643, 1592683901148834411523151712461, false, 1060687385626035100, 1962790706593477577866428536787);
        _liquidationERC20PoolHandler.moveQuoteToken(622924749554783082, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 206100563257106377646632, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 2);
        _liquidationERC20PoolHandler.pledgeCollateral(39721261669500112718287201963735152937902836871235, 1, 17503706316394411);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639934, 8024873973, 100507328539034263790, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _liquidationERC20PoolHandler.moveQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639933, 2010353520475495291170442301912519214596170415350932892666780, 8247526811945546874144339887590488518008430068924453118339716106, 0, 1842917566803597);
        _liquidationERC20PoolHandler.settleAuction(1369872809231048308195609213454652308538836880891013692057321710816985139759, 289102764947587424663, 4635457438, 43434344228221909922978762152410);
        _liquidationERC20PoolHandler.bucketTake(77496476242347058799593374076656100532570448906, 23324379400948624152404, false, 1996172304248320726505864654475924726, 740322102438025701407436701352414233219863455315083774156);
        _liquidationERC20PoolHandler.drawDebt(2465470425840940817411774857, 2571114953112742786202168168942, 1014548194588755768470288);
        _liquidationERC20PoolHandler.bucketTake(745711691222935842582697529472583380570945351776571641477869158494290587, 236427724535808256169190917991, false, 7057756421111227253648093489117847960769017442894, 1055502912745376810886621669033);
        _liquidationERC20PoolHandler.addCollateral(1061779879643310433, 4026339211717296292804825327927, 7255314989569090681804070749938, 2006239083137999009852498);
        _liquidationERC20PoolHandler.takeAuction(1283398927826353662841105924123, 10441417265178545870448516620914, 7565, 1001591492915731804);
        _liquidationERC20PoolHandler.settleAuction(3, 1397709385274168353734431838654008, 545639714448547348620030918561134138096702650097248352976, 9771818247708889074574536797);
        _liquidationERC20PoolHandler.settleAuction(1000000000069549463, 1351503560879323464, 1832955994, 7468861645671816684920397715887);
        _liquidationERC20PoolHandler.kickAuction(28746770650835738840530857666343, 2070550362630234122, 1167789554836952589168937825835, 1000186193093011441);
        _liquidationERC20PoolHandler.withdrawBonds(2127817885843163162817498951693, 1000024215726633737, 852846640361941096154000793302419);
        _liquidationERC20PoolHandler.addCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639934, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 8711211, 1);
        _liquidationERC20PoolHandler.transferLps(2906646119339965349921359404921, 1000011006328337044, 3204228230375133706683009999140, 5959307461876267786862318848649, 4175040156333034321596801411);
        _liquidationERC20PoolHandler.takeAuction(3069991969816329356681464084403108409010747703358085, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 559072960552087253127398781848341013911805474158184590255580829, 115792089237316195423570985008687907853269984665640564039457584007913129639933);
        _liquidationERC20PoolHandler.removeQuoteToken(220429303, 38141394634096423490142732225869662249994538030243821066258551895265454906278, 0, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _liquidationERC20PoolHandler.pullCollateral(797969, 1, 2);
        _liquidationERC20PoolHandler.settleAuction(2690203989764862458032, 8029113892334684150173374196127, 43467183313777046415525638463, 3870997758633165755653392007913);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639932, 253243049314693570367, 1, 6166457);
        _liquidationERC20PoolHandler.takeAuction(3357622966227363750570613883680, 4951269735518543344858094910964, 1017964620893202002985235651595, 281614713739204);
        _liquidationERC20PoolHandler.kickAuction(753584878874314971560083424557701850385530947431429367465802634481950940, 5920047275579788758504875392370, 1999999999999997999999999999999999975432674289, 1617686819026547128896308045862);
        _liquidationERC20PoolHandler.repayDebt(1293975714214592046746302918212, 4120612120495322420373192252489155, 1024806532799439823);
        _liquidationERC20PoolHandler.withdrawBonds(1756571070747610033910708799907, 4992714850142500950348469934408, 71853405850320900287309042479);
        _liquidationERC20PoolHandler.kickWithDeposit(115792089237316195423570985008687907853269984665640564039457584007913129639932, 255652551437322786266554952841707415273736061159634274, 3);
        _liquidationERC20PoolHandler.kickAuction(115792089237316195423570985008687907853269984665640564039457584007913129639935, 2629879431337829208207060362473075397414785556989661565150017094211890122, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _liquidationERC20PoolHandler.kickWithDeposit(51659023878042301277250997073244982, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 0);
        _liquidationERC20PoolHandler.takeAuction(3, 78870668732016785292671569665085729080988158423724783395594, 2, 298022583549501475423287040108577818982202642818477386026973054777161860);
        _liquidationERC20PoolHandler.drawDebt(2, 20603317378542628263862915818716754475651, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _liquidationERC20PoolHandler.repayDebt(26669578884974905602, 0, 3);
        _liquidationERC20PoolHandler.removeCollateral(507150490380447805360057803027478333131790920318917457, 43252107287618289443232617966241210, 2132729817631783392477, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _liquidationERC20PoolHandler.pledgeCollateral(512749894191567190, 97125321645749610390633951148, 1351723596887747991077);
        _liquidationERC20PoolHandler.kickWithDeposit(832281773276003, 1519877355124224435567616538384644313965108820073744607071499955933, 5378892505461270614716635938787813579702576674795498437957908068289601320395);
        _liquidationERC20PoolHandler.bucketTake(1407932162560559427259739991332, 1002614712016360732542515, false, 1000071273663475130253763, 10288978422409877239560234465672744);
        _liquidationERC20PoolHandler.takeAuction(1096654327376952234, 1991771954302555237620077890654, 1947500794342808708167078440906, 1553940794741961421063317210972);
        _liquidationERC20PoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639932, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 115792089237316195423570985008687907853269984665640564039457584007913129639933);
        _liquidationERC20PoolHandler.removeCollateral(11443983377004160078788040774, 848869196787998141249, 12924582979930626414375646, 4588788981391858341082837691);
        _liquidationERC20PoolHandler.settleAuction(1, 272669903682058788471670, 37402566195825414791373595899344489810110018187962, 3);
        _liquidationERC20PoolHandler.pledgeCollateral(3, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 17506670774889561790842552);
        _liquidationERC20PoolHandler.addCollateral(1001284634695134013811172831584, 999999999999997448542104215681849381059651322, 2859718383760564767148138845594, 1019028149080044032);
        _liquidationERC20PoolHandler.takeAuction(3, 0, 2340555370681197879979638, 115792089237316195423570985008687907853269984665640564039457584007913129639933);
        _liquidationERC20PoolHandler.pullCollateral(9916333946215455110, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _liquidationERC20PoolHandler.drawDebt(1095878564400558454407824452421, 900914890173987406083890928303, 2607897033357924243969616095624515);
        _liquidationERC20PoolHandler.settleAuction(0, 1, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 22020);
        _liquidationERC20PoolHandler.withdrawBonds(404643322088809804484023082216, 217893016240692355949143778115, 11072481661937904847565847135154788);
        _liquidationERC20PoolHandler.removeQuoteToken(81065976715609582581020368717100010, 53561485623109742259677531560870393031595097189323648665134340471, 3, 1);
        _liquidationERC20PoolHandler.removeQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _liquidationERC20PoolHandler.bucketTake(3, 117, true, 326188102238143751261407746159535612, 954616971888252530840426157);
        _liquidationERC20PoolHandler.pledgeCollateral(328233460461580042668975182802174680196103, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 451862430077634624598699643507);
        _liquidationERC20PoolHandler.transferLps(115792089237316195423570985008687907853269984665640564039457584007913129639932, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 258910283614, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 4836288694094938767055888665810967405451434314634593821865553522691);
        _liquidationERC20PoolHandler.repayDebt(27957555823051776625688636023, 2660814025652818712776, 5119379308366081522767759821245394);
        _liquidationERC20PoolHandler.repayDebt(1322468314855166397958821047344, 1032477503749029121, 5173871942510262753390);
        _liquidationERC20PoolHandler.addCollateral(361060712044448742042469421190853629, 280376743078537948871381586523683312562364789010611267674211, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 34201584744892364473664725103281943);
        _liquidationERC20PoolHandler.pledgeCollateral(25821535269262404151788177580685160162752151506110138351801807369144299775, 28492794024699937826270098309478416518992910831853893357768690066578428669185, 1665111948763090437070138330);
        _liquidationERC20PoolHandler.pullCollateral(6446286953108675677141306883869, 2389053227176890389828170233132, 1000077539721820574);
        _liquidationERC20PoolHandler.pullCollateral(37781253544113401271771822567701072654478, 6584598684, 36056910989648996389069772679025530557700293852541092);
        _liquidationERC20PoolHandler.bucketTake(7139518058408071391080327308392708977514941198, 149075355261793859169164, false, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 560473257523418768213315169214148430577052370234744);
        _liquidationERC20PoolHandler.settleAuction(4238981637135242083095044673961, 518149133802348354, 8629660634377811959789598397356111722, 7928455330116992032966857593343);
        _liquidationERC20PoolHandler.kickAuction(1006641393134030650212491673491, 2254672045357380779399971737, 1849206347, 1015842838651215681);
    
        invariant_fenwick_depositAtIndex_F1();
    }

    function test_regression_10_buckets_fenwick_depositsTillIndex_F2() external {
        // this test pass with 3 buckets vm.setEnv("NO_OF_BUCKETS", "3");
        _liquidationERC20PoolHandler.pledgeCollateral(1652787008, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _liquidationERC20PoolHandler.repayDebt(4019680323911861478929700416707, 709724343237993752311068669569362756209935298858630585686647675507651355, 1737950468774058122900233157578);
        _liquidationERC20PoolHandler.pledgeCollateral(1286842971, 13693724938856635742528522838165924052783500301157426900352440724452689559867, 4446947903);
        _liquidationERC20PoolHandler.takeAuction(1, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 585217996755379857122);
        _liquidationERC20PoolHandler.settleAuction(2721992315840614362589373631108, 1000020848858547984, 760626789299298155678188940694949110953996485844634422383309856021173384, 6233959018418061379158125625515);
        _liquidationERC20PoolHandler.removeQuoteToken(1983495196045624999081424838483, 3918138750862078636417248656072, 702962821853064429738928233715915720495467303688721894870539334426410016, 8712918142855779081525616919492);
        _liquidationERC20PoolHandler.addQuoteToken(4737378205187417651219466736491, 739553957997021632752812874799, 67147861593996184855935598995, 1000018012593027169091867595622);
        _liquidationERC20PoolHandler.settleAuction(45118137782909202371105146811913463818558713893671171740399842259, 7373535527886969856019431116073559630867323169569, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _liquidationERC20PoolHandler.moveQuoteToken(2, 4119948323278972, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 66740975578535178018102747936588193702749830095213879646222108231, 82541448423536386907123723648417000113954443);
        _liquidationERC20PoolHandler.removeCollateral(303962207990713686085941385535530009018, 667739586415684231700564611, 9898566645448076355210371291557, 3386960261852336680080790013641);
        _liquidationERC20PoolHandler.addCollateral(58817665567990509484919416658747845336692378, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 4065647975099946244, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _liquidationERC20PoolHandler.kickAuction(1, 3, 0, 187154011707337932325211718218428718695549617878846647312844619826);
        _liquidationERC20PoolHandler.pullCollateral(1010879987639494440, 4141786313502565306511798037607, 5326056495442423081056467407418093);
        _liquidationERC20PoolHandler.withdrawBonds(705387849337111640368300264209, 472425586425898084868984263546, 2659330477615858582096);
        _liquidationERC20PoolHandler.moveQuoteToken(68299230338892190572797699584, 1002347174488275631, 7772347733123779456204107633245, 4458581746419444176725198962882, 284252589008658088);
        _liquidationERC20PoolHandler.removeCollateral(106217455523432970413330292262571090514371283331875494730628872335438710, 1, 4300695540902618439277114386313892028, 551670685265119);
        _liquidationERC20PoolHandler.kickAuction(5322146344188891145049448505780, 1034553557751895757643347417821, 1000613767875712817867374, 1008624611657766729);
        _liquidationERC20PoolHandler.settleAuction(115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 593022510863575456428047, 1624749215828154953);
        _liquidationERC20PoolHandler.addQuoteToken(173919574026808008, 287945976473240972531080019268, 1039995010965295839, 1082212923920894284040111818295);
        _liquidationERC20PoolHandler.pledgeCollateral(1862819700898244179399604664721, 770010238971543679208766196995, 571731346625989482107316720037);
        _liquidationERC20PoolHandler.addQuoteToken(1778343634, 1012210866082349378584149, 8274756588451214398413037881628, 1902543046);
        _liquidationERC20PoolHandler.settleAuction(556377937462611876930114152159, 5978768666229064785157475445895, 1880440926170796115155335956327, 2648776796378143719811);
        _liquidationERC20PoolHandler.takeAuction(440758200334307602129765067953, 1000001673657822317, 761161708686663715347468146460587967538143394882782687234307020654944900, 1008805838245048225);
        _liquidationERC20PoolHandler.kickAuction(82, 334766983873420623493235767066275782713777000619503508670, 63277208661501730647423, 52724);
        _liquidationERC20PoolHandler.removeQuoteToken(1, 0, 47544439817259533264417943, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _liquidationERC20PoolHandler.bucketTake(115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639934, false, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639933);
        _liquidationERC20PoolHandler.drawDebt(682308073558299228152706498223, 2000010274190599615155976, 2115387583334823419888405854372916);
        _liquidationERC20PoolHandler.withdrawBonds(115792089237316195423570985008687907853269984665640564039457584007913129639933, 1358892, 326132216474343228199245594921443582957752825849351669559160016281333766);
        _liquidationERC20PoolHandler.removeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639934, 3, 39201089, 1318974255632054685151579822356434144012);
        _liquidationERC20PoolHandler.pledgeCollateral(59635966232487896478406439728824198734476648071660945833915, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 13882428116270967890383275801244);
        _liquidationERC20PoolHandler.removeCollateral(2573121698782730558964838934090, 1000325352211088256, 1015628593755167246, 1003939459864088136710131719429);
        _liquidationERC20PoolHandler.drawDebt(37756855714170239350510, 0, 863738448824134185180079137071824729391661937935791018482);
        _liquidationERC20PoolHandler.takeAuction(2252931363165571551372990365014, 382252591580120366823638371309, 1109038698685852851381741571689, 1186408485299308087115714);
        _liquidationERC20PoolHandler.bucketTake(16080836170861441071137353034655516634069118, 13417, false, 22670078790442115680284451353083562423932296, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _liquidationERC20PoolHandler.removeCollateral(3, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 29524855788131492372785645166644590521349388, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _liquidationERC20PoolHandler.drawDebt(92158412088846733722382554490782818632154, 173966335160165819061927249613932532425026939758235, 8270189197316142249);
        _liquidationERC20PoolHandler.removeCollateral(2000000000000000000000694365946224811964202468, 10092080971327116299286856775020, 1609277480548921492081744861019, 4371303882875445890003478788085);
        _liquidationERC20PoolHandler.removeCollateral(145373054532925972698679300543022484929791768381534863557152788448434555, 2051718385573247, 8275151039767993600355, 8539222545129872601752);
        _liquidationERC20PoolHandler.settleAuction(1000092199457610848, 4477250341921706529809424808543096, 1759906476, 358140679410375588106283137874);
        _liquidationERC20PoolHandler.withdrawBonds(534027600895509751515490844155351150631870219925, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 61243160953593509302972736662431);
        _liquidationERC20PoolHandler.kickWithDeposit(701526431949095526598535866533, 1449458996839103557396370018491, 121422685529945075360217992683);
        _liquidationERC20PoolHandler.takeAuction(115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 3, 2);
        _liquidationERC20PoolHandler.removeQuoteToken(5968384957546835262263929945678, 10680234826966895449041551120832, 1999999999999999421285482542339687521344072398, 3797832184901628682584203427760);
        _liquidationERC20PoolHandler.transferLps(2053053570255639055192486311504, 97597786894111403201399886, 70062261776809949709510846875, 503187341591428523, 999999999999999999999999998998230526966508458);
        _liquidationERC20PoolHandler.kickWithDeposit(2459101563294021562857605502340, 1012888438550910767, 2811569804158661169503090013969);
        _liquidationERC20PoolHandler.kickAuction(1796293217, 2015061556239435218271418713619, 3633516890615431898701348517436, 148143307963895766786875020014);
        _liquidationERC20PoolHandler.kickAuction(115792089237316195423570985008687907853269984665640564039457584007913129639934, 2, 751962010052996, 2);
        _liquidationERC20PoolHandler.bucketTake(0, 115792089237316195423570985008687907853269984665640564039457584007913129639934, true, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 2);
        _liquidationERC20PoolHandler.withdrawBonds(8321562837581312966176540356930, 895461445815640358692757429505, 1095495412900949134);
        _liquidationERC20PoolHandler.drawDebt(1, 777462753477611399229163207854833302106219118418585142339781810047397886472, 578243641264930307858405734906911382093522945017072537044014);
        _liquidationERC20PoolHandler.bucketTake(115792089237316195423570985008687907853269984665640564039457584007913129639935, 13465672623068703739989539839819811040252, true, 2, 718256776557938955889837);
        _liquidationERC20PoolHandler.takeAuction(390376441935228752762016286669, 1015902232468034569, 54497045349392900217536572352947636980171091063786267989031860333409994632711, 1027298257518695433640513);

        invariant_fenwick_depositsTillIndex_F2();
    }

}