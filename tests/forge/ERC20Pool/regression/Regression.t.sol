// SPDX-License-Identifier: UNLICENSED

import { BaseInvariants }            from "../invariants/BaseInvariants.t.sol";

pragma solidity 0.8.14;


contract RegressionTest is BaseInvariants { 

    function setUp() public override { 
        super.setUp();

    }

    function test_regression_invariantUnderflow_1() external {
        _basicPoolHandler.drawDebt(115792089237316195423570985008687907853269984665640564039457584007913129639935, 3);
        _basicPoolHandler.drawDebt(604217486333374559824224475, 2);
        // _basicPoolHandler.removeQuoteToken(48605396058975529610886708892290172742139629757878259952769443255, 620598847301497496390, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        // _basicPoolHandler.addQuoteToken(121812982695489902377449142, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 1);
        // _basicPoolHandler.removeCollateral(1695, 3191, 3339);
        // _basicPoolHandler.addCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639934, 98746143110509701399147258206957287538404619704805698298, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        // _basicPoolHandler.drawDebt(35819778527008089916498168439712, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        // _basicPoolHandler.addCollateral(1, 788005697651695551729006442134279006544, 13586269483209878580968852636067055712479605777864531922311);
        // _basicPoolHandler.addCollateral(209900649432187775163026737615546159188, 2, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        // _basicPoolHandler.addCollateral(17787260519149902028319432173968319867133064769473800877660, 6018081502065022573461311, 2);
        // _basicPoolHandler.drawDebt(115792089237316195423570985008687907853269984665640564039457584007913129639933, 41843504958541560799953016905379942585597332441241006489);
        // _basicPoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639932, 37086176452727830123848310977841401690650452802983461074273);
        // _basicPoolHandler.removeQuoteToken(3455, 6999, 11586);
        // _basicPoolHandler.drawDebt(16306, 1796);
        // _basicPoolHandler.addCollateral(541, 1269, 4643);
        // _basicPoolHandler.removeQuoteToken(2, 2, 133484587622306);
        // _basicPoolHandler.removeQuoteToken(9996, 9540, 99083483192821702512417757129846933505046311663876009022205851205757482241844);
        // _basicPoolHandler.removeQuoteToken(9877, 10061, 2527346122);
        // _basicPoolHandler.removeCollateral(65798, 2535, 20000);
        // _basicPoolHandler.removeCollateral(11210, 19588, 557);
        // _basicPoolHandler.removeQuoteToken(4125886397034872350753213711645314795, 537314675211488457656444319161005189307040945537957295847510429, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        // _basicPoolHandler.addCollateral(5269522547406891, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 119395617685247);
        // _basicPoolHandler.removeQuoteToken(6743, 550, 515544862944662148599477108050029971417792571756);
        // _basicPoolHandler.repayDebt(387519702870622857781259164653494836685972412737376369846384715893473128728, 719241518299909424103762733507790802051727168165691238503886255690472579389);
        // _basicPoolHandler.addQuoteToken(1897764174991165664741584096136342033534690365525234668492435246853764099019, 17427904, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        // _basicPoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639934, 11610003271653333);
        // _basicPoolHandler.repayDebt(14423199, 52000000000000000000);
        // _basicPoolHandler.removeQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 2721923);
        // _basicPoolHandler.removeCollateral(13034, 522, 3401);
        // _basicPoolHandler.drawDebt(4138, 40951761921131248326808716914722257567890896464358550038381560916224743587851);
        // _basicPoolHandler.addCollateral(76047514239753773539511745617922807, 5428, 912);
        // _basicPoolHandler.removeCollateral(11812, 10655, 1669);
        // _basicPoolHandler.removeCollateral(1833, 12196, 6671);
        // _basicPoolHandler.drawDebt(115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        // _basicPoolHandler.removeCollateral(11956, 576, 489901673482039835882003882772353234);
        // _basicPoolHandler.repayDebt(3590162407444847312619014959176920015848426149667741079005123686569976, 2768);
        //_basicPoolHandler.removeQuoteToken(6660, 11960, 2233);

        invariant_fenwickTreeSum();
        invariant_pooldebt();
        invariant_quoteTokenBalance();
        invariant_collateralBalance();
    }



    function invariant_regression_drawDebtBreak() external {
        _basicPoolHandler.addCollateral(9839225097845, 4378792109135069635340670934701467450489537425346159702589, 12661053814885017468263806364420570047032379190636823936213792236874773);
        _basicPoolHandler.addQuoteToken(9227, 3280, 6877);
        _basicPoolHandler.drawDebt(4056, 17170); // errors here ! <-

        _basicPoolHandler.removeQuoteToken(1, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 2);
        _basicPoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639933, 0);
        _basicPoolHandler.removeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639932, 4868, 3);
        _basicPoolHandler.removeQuoteToken(1110740537522234917938747545621, 2, 1711174221906864924458339956694983218955335230);
        _basicPoolHandler.removeQuoteToken(755, 2418, 773);
        _basicPoolHandler.repayDebt(2548044, 62128979043036111683413123224164099201388);
        _basicPoolHandler.removeQuoteToken(921445055333825732774361817970, 10374446943939341116930518948196130099037113136148380654019153518391, 24);
        _basicPoolHandler.removeCollateral(15477340777190, 81589033980515487, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _basicPoolHandler.addQuoteToken(2517338738424698062373853379563254418055217709070824595361332856, 0, 1647289334119624);
        _basicPoolHandler.addCollateral(93248472474228852313485195341904208850897382853100311432305, 1, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _basicPoolHandler.repayDebt(115792089237316195423570985008687907853269984665640564039457584007913129639932, 3);
        _basicPoolHandler.addCollateral(114358, 2, 744776126621);
        _basicPoolHandler.repayDebt(2346, 4610);
        _basicPoolHandler.drawDebt(115792089237316195423570985008687907853269984665640564039457584007913129639933, 3081074436920990677829381806751954618193949391436975870844138);
        _basicPoolHandler.repayDebt(805, 3108116525333279813727551168656553);
        _basicPoolHandler.addQuoteToken(9082, 3641, 6889);
        _basicPoolHandler.addCollateral(90357516406621600908155006781215012, 20499300307960536937137492094299133118831183040095938583, 239846906411349996999);
        _basicPoolHandler.addQuoteToken(1729702082758264007326, 200099626809917141, 81096405401712896);
        _basicPoolHandler.drawDebt(1, 3);
        _basicPoolHandler.removeCollateral(3690, 2356, 13955);
        _basicPoolHandler.addQuoteToken(1187, 10773, 517440284);
        _basicPoolHandler.removeCollateral(0, 3665253300995173228950701429557262770816540025964303836586, 541831772890059359291362115389890324566498919763481897);
        _basicPoolHandler.drawDebt(0, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _basicPoolHandler.removeQuoteToken(2, 1, 3);
        _basicPoolHandler.drawDebt(5220, 105201747942104167411888860889579407000000000);
        _basicPoolHandler.removeQuoteToken(31545427929116247156443182677489737395223609222207912791759654, 115792089237316195423570985008687907853269984665640564039457584007913129639935, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _basicPoolHandler.addCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639932, 2414845206638235792266653481927970112516418437122005792662, 310253551052443802389254750537379559796877722570387899478);
        _basicPoolHandler.repayDebt(6554, 9443);
        _basicPoolHandler.repayDebt(112327031088508375817304237223123310, 446860392692315572);
        _basicPoolHandler.addQuoteToken(1, 0, 1);
        _basicPoolHandler.addCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639933, 210115269548659638352670456892421688917223049521327556314224326322, 3092083764300449271716386459437691051556429830598126611669956);
        _basicPoolHandler.addQuoteToken(2, 115792089237316195423570985008687907853269984665640564039457584007913129639933, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _basicPoolHandler.removeCollateral(1743677978, 1325437902620895068387062507934542597813850920030, 15719567384875436858682835825696921768736025917422310026728223141160198747040);
        _basicPoolHandler.removeCollateral(11575818236171277577588785786857459032, 17662, 16324);
        _basicPoolHandler.removeQuoteToken(12033, 3551, 10795);
        _basicPoolHandler.addCollateral(753, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 2);
        _basicPoolHandler.drawDebt(2595, 1400);
        _basicPoolHandler.drawDebt(2, 5052410334070596622963028208423377370760530920440419836447819);
        _basicPoolHandler.removeCollateral(1, 7727381089332809034984286112317, 1);
        _basicPoolHandler.addQuoteToken(13220, 795787063, 23604147869056468586223917865141);
        _basicPoolHandler.addCollateral(2910484177747747512853559298083408954027845432637835, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 1);
        _basicPoolHandler.removeCollateral(9996868109785989607891728055903454622953, 1713, 6115);
        _basicPoolHandler.addCollateral(26995385877156842759939547354520069953012253704300282296100776354735870, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 115792089237316195423570985008687907853269984665640564039457584007913129639935);
        _basicPoolHandler.removeQuoteToken(143299082889756539517250926603604194, 1133322224, 6186);
        _basicPoolHandler.removeCollateral(7717, 18067, 16548);
        _basicPoolHandler.removeCollateral(1, 3, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _basicPoolHandler.removeQuoteToken(948227464, 987366280557299091522657160777829221, 2108);
        _basicPoolHandler.addQuoteToken(1, 1, 8221201293223243187086819405);
        _basicPoolHandler.addCollateral(6357887748933451336539530766566426791, 9758, 2659497228133881972464439471123347821);
        _basicPoolHandler.removeQuoteToken(1, 0, 3);
        _basicPoolHandler.removeCollateral(8971, 10406, 5381559529326998353330239836131153673);
        _basicPoolHandler.repayDebt(2520413, 115792089237316195423570985008687907853269984665640564039457584007913129639934);
        _basicPoolHandler.addQuoteToken(2, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 3);
        _basicPoolHandler.addQuoteToken(16409, 1001923076923076922998076923076945659, 5852);
        _basicPoolHandler.drawDebt(886878597923259830993, 3);
        _basicPoolHandler.repayDebt(10436, 896);
        _basicPoolHandler.removeQuoteToken(421, 7156, 10486);
        _basicPoolHandler.addCollateral(1246771710662761570740075034444758811, 63972172491312293777323754793997621820589467775383488257095217666409758261627, 15751);
        _basicPoolHandler.removeQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639933, 1111890292576791192552225183503053334793174503289767, 0);
        _basicPoolHandler.drawDebt(8374, 2705);
        _basicPoolHandler.removeQuoteToken(3, 247290559603351262802598061744118618, 3);
        _basicPoolHandler.repayDebt(3, 12483398355985480846450753659414469543237947089708);
        _basicPoolHandler.removeCollateral(1, 20222962615076919103101374436523607456761324, 0);
        _basicPoolHandler.addQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639934, 6762550561657765493273543430792, 3);
        _basicPoolHandler.repayDebt(266729599318329691966, 4996024670);
        _basicPoolHandler.removeCollateral(0, 9070327678273291995423, 2);
        _basicPoolHandler.addCollateral(2, 1404398944537442139565726983076772893607378237524452648, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _basicPoolHandler.removeCollateral(812923307975848166878709020327311913, 115792089237316195423570985008687907853269984665640564039457584007913129639934, 194814193652240465447068706001389);
        _basicPoolHandler.removeCollateral(115792089237316195423570985008687907853269984665640564039457584007913129639932, 48881569, 2);
        _basicPoolHandler.addQuoteToken(1004456214611775210, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _basicPoolHandler.addCollateral(0, 11815448795206674186214314680771, 2530706355881773080388703996616411519840373607368758328527514551);
        _basicPoolHandler.removeQuoteToken(0, 115792089237316195423570985008687907853269984665640564039457584007913129639932, 115792089237316195423570985008687907853269984665640564039457584007913129639932);
        _basicPoolHandler.removeQuoteToken(8866, 9997999873304309307982620059142276644398, 8000);
        _basicPoolHandler.addCollateral(26758461118163523055733377474032654598104554628397732753329330722509196622, 984, 873477485712);
        _basicPoolHandler.removeQuoteToken(115792089237316195423570985008687907853269984665640564039457584007913129639932, 136929532427, 44853890603102228923717057680036380153544);
        _basicPoolHandler.removeCollateral(979043036111745541123224164099139260, 38077841216222046028495120926649120709187085218495103770250080310036979580315, 12493);
        _basicPoolHandler.removeQuoteToken(3, 36879132560890725111414464059776625569348271742398760523265010158957, 5327177816432825080576374241901620571928726307549804394);
        _basicPoolHandler.addCollateral(16781459381175566529595522827961861717, 1, 386006452498939230354198853490603336892778369348265066452481990526931852);
        _basicPoolHandler.repayDebt(317429189, 3298972486692696186524144646754487164);
        
        invariant_fenwickTreeSum();

        _basicPoolHandler.removeQuoteToken(29969932493659093579519920003174532490356247180687578884632806722737821057024, 314241982999137060985449407283931, 3469);

        invariant_fenwickTreeSum();
        invariant_pooldebt();
        invariant_quoteTokenBalance();
        invariant_collateralBalance();
    }

}